webpackJsonp([1,6],{"5/rT":function(e,t,n){"use strict";var a={data:function(){return{formItem:{gender:"",age:"",majors:""},submitting:!1,rules:{gender:[{required:!0,message:"Please select gender",trigger:"change"}],age:[{required:!0,message:"Please select age",trigger:"change"}],majors:[{required:!0,message:"Please select major",trigger:"change"}]}}},methods:{submit:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.submitting=!0,e.$http.post("/api/saveProfile",e.formItem).then(function(e){window.location="/index?"+window.location.href.split("?")[1]}).catch(function(t){e.submitting=!1,e.$Message.error("Something wrong when sending data!")}))})},login:function(){window.location="/login"}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"800px",margin:"100px auto"}},[n("h1",{staticStyle:{"text-align":"center"}},[e._v("Please fill in your information:")]),e._v(" "),n("Divider"),e._v(" "),n("Form",{ref:"form",attrs:{model:e.formItem,rules:e.rules,disabled:e.submitting,"label-position":"top"}},[n("FormItem",{attrs:{prop:"gender"}},[n("strong",{attrs:{slot:"label"},slot:"label"},[e._v("Gender")]),e._v(" "),n("RadioGroup",{model:{value:e.formItem.gender,callback:function(t){e.$set(e.formItem,"gender",t)},expression:"formItem.gender"}},[n("Radio",{attrs:{label:"male"}},[e._v("Male")]),e._v(" "),n("Radio",{attrs:{label:"female"}},[e._v("Female")])],1)],1),e._v(" "),n("FormItem",{attrs:{prop:"age"}},[n("strong",{attrs:{slot:"label"},slot:"label"},[e._v("Age")]),e._v(" "),n("RadioGroup",{model:{value:e.formItem.age,callback:function(t){e.$set(e.formItem,"age",t)},expression:"formItem.age"}},[n("Radio",{attrs:{label:"0-13"}},[e._v("0-13")]),e._v(" "),n("Radio",{attrs:{label:"14-25"}},[e._v("14-25")]),e._v(" "),n("Radio",{attrs:{label:"25-35"}},[e._v("25-35")]),e._v(" "),n("Radio",{attrs:{label:"35-45"}},[e._v("35-45")]),e._v(" "),n("Radio",{attrs:{label:"45-60"}},[e._v("45-60")]),e._v(" "),n("Radio",{attrs:{label:">=60"}},[e._v(">=60")])],1)],1),e._v(" "),n("FormItem",{attrs:{prop:"majors"}},[n("strong",{attrs:{slot:"label"},slot:"label"},[e._v("Majors")]),e._v(" "),n("RadioGroup",{model:{value:e.formItem.majors,callback:function(t){e.$set(e.formItem,"majors",t)},expression:"formItem.majors"}},[n("Radio",{attrs:{label:"IR"}},[e._v("Information retrieval related")]),e._v(" "),n("Radio",{attrs:{label:"CS other than IR"}},[e._v("Computer science other than information retrieval")]),e._v(" "),n("Radio",{attrs:{label:"Other"}},[e._v("Other")])],1)],1),e._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("Submit")])],1)],1)],1)},staticRenderFns:[]},s=n("VU/8")(a,i,!1,null,null,null);t.a=s.exports},Ie5r:function(e,t){},Jx15:function(e,t,n){"use strict";var a=n("Gu7T"),i=n.n(a),s=n("Dd8w"),r=n.n(s),o=n("zvx4"),l=n("tFrH"),c=n("fZjL"),u=n.n(c),d=n("mvHQ"),h=n.n(d),p={props:["value","activeActions","loading","data","searchResultConfig"],model:{prop:"value",event:"change"},created:function(){var e=this;this.value.length>0&&this.value.map(function(t){e.selected.push(t.itemId)})},mounted:function(){this.bindLoadEvent()},watch:{value:function(e,t){var n,a,i=(n=e.map(function(e){return e.itemId}),a=t.map(function(e){return e.itemId}),n.length===a.length&&(h()(n)===h()(a)||0===n.concat(a).filter(function(e){return!n.includes(e)||!a.includes(e)}).length&&"orderChange"));!0!==i&&(this.selected=e.map(function(e){return e.itemId}),!1===i&&this.$emit("on-change",e),"orderChange"===i&&this.$emit("on-order-change",e))},activeActions:function(e){if(e){var t=[];for(var n in this.searchResultConfig)this.searchResultConfig[n].indexOf(e[0])>=0&&t.push(n);this.active=[].concat(t)}},data:function(e){this.collapse=u()(e)}},data:function(){return{selected:[],collapse:[],active:"",pageLink:"",showFrame:!1,frameLoading:!1}},methods:{showWebPage:function(e){var t=this;this.frameLoading=!0,this.showFrame=!0,this.$nextTick(function(){t.pageLink=e}),setTimeout(function(){t.frameLoading=!1},3e4)},copyLink:function(e){var t=this;this.$copyText(e).then(function(e){t.$Message.info("Copied!")},function(e){t.$Message.info("Can not copy!")})},bindLoadEvent:function(){var e=this,t=this.$refs.frame;t.onload=function(){e.frameLoading=!1},t.onreadystatechange=function(){"interactive"!==t.readyState&&"complete"!==t.readyState&&"loaded"!==t.readyState||(e.frameLoading=!1)}},getActive:function(){return this.active},onCheckGroupChange:function(e){var t=this,n=[];e.map(function(e){var a=e.split("-");n.push(r()({},t.data[a[0]][a[1]],{itemId:e}))}),this.$emit("change",n),this.$emit("changeBackupForParent",n)},reset:function(){this.selected=[],this.collapse=[],this.active="",this.showFrame=!1,this.pageLink="",this.frameLoading=!1}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%",height:"100%"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showFrame,expression:"showFrame"}],staticStyle:{width:"100%",height:"100%"}},[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.showFrame=!1}}},[n("Icon",{attrs:{type:"ios-arrow-back"}}),e._v("Back to results\n      ")],1),e._v(" "),n("div",{staticStyle:{width:"100%",height:"calc( 100% - 50px )","margin-top":"10px"}},[e.frameLoading?n("Spin",{attrs:{size:"large",fix:""}},[n("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"50"}}),e._v(" "),n("div",[e._v("Loading page...")])],1):e._e(),e._v(" "),n("iframe",{ref:"frame",staticStyle:{width:"100%",height:"100%"},attrs:{name:"frame",src:e.pageLink,frameborder:"0"}})],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.showFrame,expression:"!showFrame"}]},[e.loading?n("Spin",{attrs:{size:"large",fix:""}},[n("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"50"}}),e._v(" "),n("div",[e._v("Searching results...")])],1):e._e(),e._v(" "),n("CheckboxGroup",{on:{"on-change":e.onCheckGroupChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[n("Collapse",{attrs:{simple:""},model:{value:e.collapse,callback:function(t){e.collapse=t},expression:"collapse"}},[e._l(e.data,function(t,a){return"Answer"===a?n("Panel",{key:a},[n("strong",[e._v(e._s(a))]),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("List",{attrs:{"item-layout":"vertical",size:"small"}},e._l(t,function(t,i){return n("ListItem",{key:a+"-"+i},[n("Checkbox",{attrs:{label:a+"-"+i,disabled:e.active.indexOf(a)<0}},[n("img",{attrs:{src:t.image,alt:"",height:"50px",width:"50px"}}),e._v(" "),n("span",{staticStyle:{color:"black"}},[e._v(e._s(t.title))])]),e._v(" "),t.link?n("a",{attrs:{target:"_blank",href:t.link}},[e._v("Show page")]):e._e(),e._v(" "),n("Divider",{attrs:{type:"vertical"}}),e._v(" "),t.link?n("a",{on:{click:function(n){return e.copyLink(t.link)}}},[e._v("Copy link")]):e._e()],1)}),1)],1)]):e._e()}),e._v(" "),e._l(e.data,function(t,a){return"Aspects"===a?n("Panel",{key:a},[n("strong",[e._v(e._s(a))]),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("List",{attrs:{"item-layout":"vertical",size:"small"}},e._l(t,function(t){return n("ListItem",{key:t},[n("Checkbox",{attrs:{label:t}},[n("span",{staticStyle:{color:"black"}},[e._v(e._s(t))])])],1)}),1)],1)]):e._e()})],2)],1)],1)])},staticRenderFns:[]},m=n("VU/8")(p,f,!1,null,null,null).exports,v={props:["value","activeActions","loading","data","searchResultConfig"],model:{prop:"value",event:"change"},created:function(){var e=this;this.value.length>0&&this.value.map(function(t){e.selected.push(t.itemId)})},mounted:function(){this.bindLoadEvent()},watch:{value:function(e,t){try{e[0].content}catch(s){var n=(a=e.map(function(e){return e.itemId}),i=t.map(function(e){return e.itemId}),a.length===i.length&&(h()(a)===h()(i)||0===a.concat(i).filter(function(e){return!a.includes(e)||!i.includes(e)}).length&&"orderChange"));if(!0===n)return;this.selected=e.map(function(e){return e.itemId}),!1===n&&this.$emit("on-filters-change",e),"orderChange"===n&&this.$emit("on-order-change",e)}var a,i},activeActions:function(e){if(e){var t=[];for(var n in this.searchResultConfig)this.searchResultConfig[n].indexOf(e[0])>=0&&t.push(n);this.active=[].concat(t)}},data:function(e){this.collapse=u()(e)}},data:function(){return{selected:[],collapse:[],active:"",pageLink:"",showFrame:!1,frameLoading:!1,selectedFilters:[]}},methods:{searchDataWithFilters:function(){for(var e=[],t=0;t<this.selectedFilters.length;t++){var n=this.selectedFilters[t];n&&e.push(n)}console.log(e),this.$emit("on-filters-change",e)},bindLoadEvent:function(){var e=this,t=this.$refs.frame;t.onload=function(){e.frameLoading=!1},t.onreadystatechange=function(){"interactive"!==t.readyState&&"complete"!==t.readyState&&"loaded"!==t.readyState||(e.frameLoading=!1)}},getActive:function(){return this.active},onCheckGroupChange:function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];a&&(a.startsWith("n:")?t.push(a.split("||")[1]):t.push(a))}console.log("NEW FILTERS LIST: "+t),this.selected=t},reset:function(){this.selected=[],this.collapse=[],this.active="",this.showFrame=!1,this.pageLink="",this.frameLoading=!1}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"100%",height:"100%"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showFrame,expression:"showFrame"}],staticStyle:{width:"100%",height:"100%"}},[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.showFrame=!1}}},[n("Icon",{attrs:{type:"ios-arrow-back"}}),e._v("Back to results\n    ")],1),e._v(" "),n("div",{staticStyle:{width:"100%",height:"calc( 100% - 50px )","margin-top":"10px"}},[e.frameLoading?n("Spin",{attrs:{size:"large",fix:""}},[n("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"50"}}),e._v(" "),n("div",[e._v("Loading page...")])],1):e._e(),e._v(" "),n("iframe",{ref:"frame",staticStyle:{width:"100%",height:"100%"},attrs:{name:"frame",src:e.pageLink,frameborder:"0"}})],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.showFrame,expression:"!showFrame"}]},[e.loading?n("Spin",{attrs:{size:"large",fix:""}},[n("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"50"}}),e._v(" "),n("div",[e._v("Updating filters...")])],1):e._e(),e._v(" "),n("Button",{on:{click:e.searchDataWithFilters}},[e._v("Search with filters")]),e._v(" "),e._l(e.data,function(t,a){return"Filters"===a?n("ul",{key:a,staticStyle:{"list-style-type":"none"}},e._l(t,function(t){return n("li",{key:t.value},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedFilters,expression:"selectedFilters"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t.value,checked:Array.isArray(e.selectedFilters)?e._i(e.selectedFilters,t.value)>-1:e.selectedFilters},on:{change:function(n){var a=e.selectedFilters,i=n.target,s=!!i.checked;if(Array.isArray(a)){var r=t.value,o=e._i(a,r);i.checked?o<0&&(e.selectedFilters=a.concat([r])):o>-1&&(e.selectedFilters=a.slice(0,o).concat(a.slice(o+1)))}else e.selectedFilters=s}}}),e._v(" "),n("label",{attrs:{for:t.id}},[e._v(e._s(t.name))])])}),0):e._e()})],2)])},staticRenderFns:[]},y=n("VU/8")(v,g,!1,null,null,null).exports,b=n("w/TU"),I={model:{prop:"value",event:"change"},components:{draggable:n.n(b).a},props:["value"],created:function(){this.value.length>0&&(this.listItems=[].concat(i()(this.value)))},watch:{value:function(e,t){this.listItems=[].concat(i()(e)),this.$emit("on-change",e)}},data:function(){return{listItems:[]}},methods:{deleteItem:function(e,t){this.listItems.splice(t,1),this.$emit("change",this.listItems)},dragEnd:function(){this.$emit("change",this.listItems)}}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"selected-list"},[0===e.listItems.length?n("div",{staticClass:"empty-list"},[n("span",[e._v("Nothing selected")])]):n("draggable",{staticClass:"list-group",attrs:{tag:"ul"},on:{end:e.dragEnd},model:{value:e.listItems,callback:function(t){e.listItems=t},expression:"listItems"}},[n("transition-group",{attrs:{type:"transition",name:"flip-list"}},e._l(e.listItems,function(t,a){return n("li",{key:t.id,staticClass:"list-group-item"},[e._v("\n        "+e._s(t.title)+"\n        "),n("div",{staticClass:"deletable-list-item"},[n("Button",{attrs:{type:"text",icon:"md-close-circle"},on:{click:function(n){return e.deleteItem(t,a)}}})],1)])}),0)],1)],1)},staticRenderFns:[]};var _=n("VU/8")(I,w,!1,function(e){n("cH6V")},"data-v-2a46400e",null).exports,x=n("hlnk"),C=function e(t,n,a){if(!n[a])return!1;var i=t.filter(function(e){return n[a]===e.name});return!!i[0]&&(i[0].children?e(i[0].children,n,a+1):i[0]&&!0===i[0].allowEmptySearch)},S={components:{helpTooltip:l.a,searchPanel:m,filtersPanel:y,draggableList:_,customCascader:o.a,createSelect:x.a},props:{searchResultConfig:{},conversationId:{},height:{type:String},sendData:{type:Function},sendDisabled:{type:Boolean},role:{type:String},finish:{type:Function},actions:{},currentState:{},searchData:{},bus:{type:Object},showOptionsToUser:!1,selectedRecommendations:[]},created:function(){var e=this;this.bus.$on("loadMore",function(t){e.searchPanelLoading=!1,e.searchResults=r()({},t)})},watch:{currentState:function(e,t){this.formItem.state=[].concat(i()(e)),this.stateChanged(this.currentState,!0)}},data:function(){var e=this;return{formItem:{selectedSearch:[],state:[],action:[],response:"",sendAnother:!1,statesBackupList:[]},rules:{state:[{required:!0,validator:function(t,n,a){if(!(!e.formItem.action||C(e.actions.system,e.formItem.action,0)||n&&0!==n.length))return a(new Error("Please select state!"));a()},trigger:"blur"}],action:[{required:!0,validator:function(e,t,n){if(!t||0===t.length)return n(new Error("Please select action!"));n()},trigger:"blur"}],response:[{required:!0,type:"string",message:"Please fill in response!",trigger:"blur"}],selectedSearch:[{validator:function(t,n,a){var i=e.$refs.searchPanel.active;if(e.formItem.action&&!C(e.actions.system,e.formItem.action,0)&&i&&i.length>0&&(!n||0===n.length))return a(new Error("Please select search results!"));a()},trigger:"blur"}]},drawer:!1,fdrawer:!1,sendLog:!0,searchPanelLoading:!1,searchResults:{},actionBackup:[],submitting:!1,statesBackupList:[]}},methods:{statesBackup:function(e){this.statesBackupList=e,this.$emit("states-backup",e)},reset:function(){var e=this;this.sendLog=!1,this.formItem={selectedSearch:[],state:[],action:[],response:"",sendAnother:!1},this.drawer=!1,this.searchPanelLoading=!1,this.searchResults={},this.actionBackup=[],this.$nextTick(function(){e.sendLog=!0})},submit:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.submitting=!0,e.sendData(r()({},e.formItem),function(){e.reset(),e.$nextTick(function(){e.submitting=!1})}))})},finishConversation:function(){var e=this;this.$Modal.confirm({title:"Warning",content:"This will finish the conversation directly and <strong>not</strong> send your response to your partner. Do you want to continue?",onOk:function(){e.submitting=!0,e.finish(r()({},e.formItem),function(){e.reset(),e.$nextTick(function(){e.submitting=!1})})},onCancel:function(){}})},cascaderVisableChange:function(e){e&&(this.drawer=!0)},stateChanged:function(e,t){var n=this;if(!this.submitting&&!this.sendDisabled||t){this.searchPanelLoading=!0,this.searchResults={},this.searchData(e||[],function(e){n.searchPanelLoading=!1,n.searchResults=r()({},e)}),this.$refs.filtersPanel.selectedFilters=[];var a=this.sendLog;this.sendLog=!1,this.formItem.selectedSearch=[],this.formItem.action=[],this.$nextTick(function(){n.sendLog=a}),this.sendLog&&!this.sendDisabled&&this.conversationId&&!t&&this.$log({conversationId:this.conversationId,type:"stateChanged",data:{states:e}})}},actionChanged:function(e){"sys"===this.role&&this.formItem.selectedSearch.length>0&&(this.actionBackup[0]!==e[0]&&(this.formItem.selectedSearch=[]),this.actionBackup=[].concat(i()(e))),this.sendLog&&!this.sendDisabled&&this.conversationId&&this.$log({conversationId:this.conversationId,type:"actionChanged",data:{actions:e}})},selectedResultChanged:function(e){this.sendLog&&!this.sendDisabled&&this.conversationId&&this.$log({conversationId:this.conversationId,type:"selectedResultChanged",data:{selectedSearch:e}})},selectedFiltersChanged:function(e){this.sendLog&&!this.sendDisabled&&this.conversationId&&this.$log({conversationId:this.conversationId,type:"selectedFiltersChanged",data:{selectedFilters:e}}),this.$emit("on-filters",e)},sendChangeBackup:function(e){this.$emit("changeBackupForParent",e)},selectedResultOrderChanged:function(e){this.sendLog&&!this.sendDisabled&&this.conversationId&&this.$log({conversationId:this.conversationId,type:"selectedResultOrderChanged",data:{selectedSearch:e}})},responseChanged:function(){this.sendLog&&!this.sendDisabled&&this.conversationId&&this.formItem.response&&this.$log({conversationId:this.conversationId,type:"responseChanged",data:{response:this.formItem.response}})},showTooltip:function(e){!this.sendDisabled&&this.sendLog&&this.conversationId&&this.$log({conversationId:this.conversationId,type:"showTooltip",data:{item:r()({},e)}})},canCreateState:function(e){return e.split(" ").length>=5?{canCreate:!1,message:"Too many words!"}:{canCreate:!0}}}},$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{overflow:"auto",padding:"10px 30px"},style:{height:e.height}},[n("Drawer",{attrs:{title:"Please select related items",closable:"","mask-closable":!1,scrollable:"",placement:"left",draggable:"",mask:!1,width:45},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("searchPanel",{ref:"searchPanel",attrs:{loading:e.searchPanelLoading,activeActions:e.formItem.action,data:e.searchResults,searchResultConfig:e.searchResultConfig},on:{"on-change":e.selectedResultChanged,"on-order-change":e.selectedResultOrderChanged,changeBackupForParent:e.sendChangeBackup},model:{value:e.formItem.selectedSearch,callback:function(t){e.$set(e.formItem,"selectedSearch",t)},expression:"formItem.selectedSearch"}})],1),e._v(" "),n("Drawer",{attrs:{title:"Please select filters",closable:"","mask-closable":!1,scrollable:"",placement:"right",draggable:"",mask:!1,width:45},model:{value:e.fdrawer,callback:function(t){e.fdrawer=t},expression:"fdrawer"}},[n("filtersPanel",{ref:"filtersPanel",attrs:{loading:e.searchPanelLoading,activeActions:e.formItem.action,data:e.searchResults,searchResultConfig:e.searchResultConfig},on:{"on-filters-change":e.selectedFiltersChanged},model:{value:e.formItem.selectedSearch,callback:function(t){e.$set(e.formItem,"selectedSearch",t)},expression:"formItem.selectedSearch"}})],1),e._v(" "),n("Form",{ref:"form",attrs:{model:e.formItem,"label-width":100,disabled:e.sendDisabled||e.submitting,rules:e.rules},nativeOn:{submit:function(e){e.preventDefault()}}},["sys"===e.role?n("FormItem",{attrs:{label:"State",prop:"state"}},[n("createSelect",{attrs:{canCreate:e.canCreateState},on:{"on-change":e.stateChanged,"states-backup":e.statesBackup},model:{value:e.formItem.state,callback:function(t){e.$set(e.formItem,"state",t)},expression:"formItem.state"}}),e._v(" "),n("Button",{on:{click:function(t){e.fdrawer=!e.fdrawer}}},[e._v("Search with filters")])],1):e._e(),e._v(" "),"sys"===e.role?n("FormItem",{attrs:{label:"Action",prop:"action"}},[n("customCascader",{staticStyle:{width:"60%",display:"inline-block"},attrs:{data:e.actions.system,placeholder:"Select"},on:{"on-visible-change":e.cascaderVisableChange,"on-change":e.actionChanged,showTooltip:e.showTooltip},model:{value:e.formItem.action,callback:function(t){e.$set(e.formItem,"action",t)},expression:"formItem.action"}}),e._v(" "),n("br"),e._v(" "),n("Button",{on:{click:function(t){e.drawer=!e.drawer}}},[e._v("Toggle result panel")])],1):e._e(),e._v(" "),"cus"===e.role?n("FormItem",{attrs:{label:"Intent",prop:"action"}},[n("customCascader",{attrs:{data:e.actions.user,placeholder:"Select"},on:{"on-change":e.actionChanged,showTooltip:e.showTooltip},model:{value:e.formItem.action,callback:function(t){e.$set(e.formItem,"action",t)},expression:"formItem.action"}})],1):e._e(),e._v(" "),"sys"===e.role?n("FormItem",{attrs:{label:"Selected Query/Results",prop:"selectedSearch"}},[n("draggableList",{model:{value:e.formItem.selectedSearch,callback:function(t){e.$set(e.formItem,"selectedSearch",t)},expression:"formItem.selectedSearch"}})],1):e._e(),e._v(" "),n("FormItem",{attrs:{label:"Response",prop:"response"}},[n("Input",{attrs:{type:"textarea",rows:4},on:{"on-blur":e.responseChanged},model:{value:e.formItem.response,callback:function(t){e.$set(e.formItem,"response",t)},expression:"formItem.response"}})],1),e._v(" "),n("FormItem",{staticStyle:{"margin-bottom":"0px"}},[n("Button",{attrs:{type:"default"},on:{click:e.submit}},[e._v("Submit")]),e._v(" "),n("Checkbox",{staticStyle:{"margin-left":"20px"},model:{value:e.formItem.sendAnother,callback:function(t){e.$set(e.formItem,"sendAnother",t)},expression:"formItem.sendAnother"}},[e._v("Send another message")]),e._v(" "),n("br"),e._v(" "),"cus"===e.role?n("a",{on:{click:e.finishConversation}},[e._v("Finish the conversation>>")]):e._e()],1)],1)],1)},staticRenderFns:[]},k=n("VU/8")(S,$,!1,null,null,null);t.a=k.exports},cH6V:function(e,t){},hlnk:function(e,t,n){"use strict";var a=n("mvHQ"),i=n.n(a),s=n("Gu7T"),r=n.n(s),o={model:{prop:"value",event:"change"},props:["value","canCreate","disabled"],mounted:function(){var e=this;this.currentOptions=[].concat(r()(this.value)),this.selected=[].concat(r()(this.value));var t=this.$refs.select.handleCreateItem;this.$refs.select.handleCreateItem=function(n){var a=e.$refs.select.query,i=!0;if(e.canCreate&&a&&e.selected.indexOf(a)<0){var s=e.canCreate(a),r=s.canCreate,o=s.message;(i=r)||n||e.$Notice.warning({content:o})}i&&t()},this.$el.querySelector('input[type="text"]').addEventListener("blur",function(){e.$refs.select.handleCreateItem(!0)})},watch:{value:function(e,t){var n=this;i()(e)===i()(t)&&i()(e)===i()(this.selected)||(e.map(function(e){n.currentOptions.indexOf(e)<0&&n.currentOptions.push(e)}),this.selected=[].concat(r()(e)),this.$emit("on-change",e))}},data:function(){return{selected:[],currentOptions:[]}},methods:{created:function(e){this.$emit("optionCreated",e),this.currentOptions.push(e)},changed:function(){this.$emit("change",this.selected),this.$emit("states-backup",this.selected)}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Select",{ref:"select",attrs:{filterable:"","allow-create":"",multiple:"",disabled:e.disabled},on:{"on-create":e.created},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[n("Option",{attrs:{disabled:"",value:"0"}},[e._v("Please enter your state option if nothing is appropriate.")]),e._v(" "),e._l(e.currentOptions,function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})],2),e._v(" "),n("Button",{on:{click:e.changed}},[e._v("Search")])],1)},staticRenderFns:[]},c=n("VU/8")(o,l,!1,null,null,null);t.a=c.exports},nhgq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("/5sW"),i=n("z/pP"),s=n("zvx4"),r=n("hlnk"),o={props:["src"],watch:{src:function(e){}},mounted:function(){var e=this;this.$refs.frame.onload=function(){console.log(e.$refs.frame.contentWindow)}},methods:{initFrame:function(){},iframeLoadedMessage:function(e){console.log(e)},iframeOnReadyStateChangeMessage:function(){}}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"a"},[t("iframe",{ref:"frame",attrs:{src:this.src,name:"abc"}})])},staticRenderFns:[]},c=n("VU/8")(o,l,!1,null,null,null).exports,u=n("Jx15"),d=n("uu6v"),h=n("5/rT"),p={components:{customCascader:s.a,createSelect:r.a,labelling:u.a,profile:h.a,rating:d.a,crossDomainFrame:c},mounted:function(){},destroyed:function(){var e=this;window.removeEventListener("beforeunload",function(t){return e.beforeunloadFn(t)})},data:function(){return{disabled:!1,actions:i.default.actionData,height:"400px",currentState:[],value5:!1,value6:!1,selectedItems:[]}},methods:{searchData:function(e,t){0!==e.length&&this.$jsonp("http://localhost:9191?query="+encodeURIComponent(e.join(" ")),{callbackQuery:"callback",callbackName:"searchDataCallback"}).then(function(e){console.log("~~~",e)})},copyLink:function(e){var t=this;this.$copyText(e).then(function(e){t.$Message.info("Copied!")},function(e){t.$Message.info("Can not copy!")})},beforeunloadFn:function(e){return(e=e||window.event)&&(e.returnValue="关闭提示"),"关闭提示"},sendData:function(e,t){console.log("sendData"),this.disabled=!0,t()},loadState:function(){this.currentState=["c","d"]}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{width:"700px",float:"right"}},[t("labelling",{ref:"labelling",attrs:{height:this.height,role:"sys",currentState:this.currentState,searchData:this.searchData,sendData:this.sendData,sendDisabled:this.disabled,actions:this.actions}})],1)},staticRenderFns:[]},m=n("VU/8")(p,f,!1,null,null,null).exports,v=n("b3L9"),g=n.n(v),y=n("kofV"),b=n.n(y),I=(n("Ie5r"),n("mtWM")),w=n.n(I),_=n("oFuF"),x=n("QhtY"),C=n.n(x),S=n("wvfG"),$=n.n(S),k=n("qJdI"),R=n.n(k);a.default.use(C.a),_.a.initAxios(w.a,g.a,a.default),a.default.use(g.a,{locale:b.a}),a.default.use(C.a),a.default.use($.a),a.default.use(R.a),a.default.prototype.$log=function(e){console.log(e)},new a.default({el:"#app",render:function(e){return e(m)}})},oFuF:function(e,t,n){"use strict";var a=n("//Fk"),i=n.n(a),s=n("Dd8w"),r=n.n(s);t.a={getUUid:function(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("").replace(/-/g,"")},initAxios:function(e,t,n){var a=this;e.defaults.timeout=15e3,e.defaults.withCredentials=!0,e.interceptors.request.use(function(e){var t=a.parseUrl(window.location.href);return e.headers&&"application/x-www-form-urlencoded"===e.headers["Content-Type"]?e:(e.params=r()({},e.params?e.params:{},{_t:Date.parse(new Date)},t),e)},function(e){return t.Notice.error({title:"Error",desc:"Something wrong when requesting data!"}),i.a.reject(e)}),e.interceptors.response.use(function(e){return e},function(e){return console.log(e.response),t.Notice.error({title:"Error",desc:e.response.data.message}),i.a.reject(e)}),n.prototype.$http=e},parseUrl:function(e){var t=e.split("?")[1];if(!t)return{};var n={};return t.split("&").forEach(function(e){var t=e.split("=")[1],a=e.split("=")[0];n[a]=t}),n}}},tFrH:function(e,t,n){"use strict";var a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("Tooltip",{attrs:{content:this.content,transfer:"","max-width":200},on:{"on-popper-show":this.showTooltip}},[t("Icon",{staticStyle:{position:"relative",right:"0"},attrs:{type:"md-help-circle"}})],1)},staticRenderFns:[]},i=n("VU/8")({props:["content"],methods:{showTooltip:function(){this.$emit("showTooltip")}}},a,!1,null,null,null);t.a=i.exports},uu6v:function(e,t,n){"use strict";var a=n("Dd8w"),i=n.n(a),s={props:["role","conversationId"],data:function(){return{formItem:{goalAchieve:"",conversationSearch:"",rate:0,goalUnderstand:"",easierWay:""},rules:{goalAchieve:[{trigger:"change"}],conversationSearch:[{message:"Please select ",trigger:"change"}],rate:[{trigger:"change",validator:function(e,t,n){if(!t)return n(new Error("Please rate your partner!"));n()}}],goalUnderstand:[{trigger:"change"}],easierWay:[{trigger:"change"}]}}},methods:{restart:function(){var e=this;this.$refs.form.validate(function(t){t?e.$http.post("/api/saveRating",i()({},e.formItem,{role:e.role,conversationId:e.conversationId})).then(function(t){e.$emit("completed")}).catch(function(t){e.submitting=!1,e.$Message.error("Something wrong when sending data!")}):e.$Message.error("Please fill in the form!")})},logout:function(){var e=this;this.$refs.form.validate(function(t){t?e.$http.post("/api/saveRating",i()({},e.formItem,{role:e.role,conversationId:e.conversationId})).then(function(e){window.location="/logout"}).catch(function(t){e.submitting=!1,e.$Message.error("Something wrong when sending data!")}):e.$Message.error("Please fill in the form!")})}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"800px",margin:"100px auto"}},[n("h1",{staticStyle:{"text-align":"center"}},[e._v("Rate this conversation")]),e._v(" "),n("Divider"),e._v(" "),n("Form",{ref:"form",attrs:{model:e.formItem,"label-position":"top",rules:e.rules,"show-message":!1}},["cus"===e.role?n("FormItem",{attrs:{prop:"goalAchieve"}},[n("h3",{attrs:{slot:"label"},slot:"label"},[e._v("Did you achieve your goal?")]),e._v(" "),n("RadioGroup",{model:{value:e.formItem.goalAchieve,callback:function(t){e.$set(e.formItem,"goalAchieve",t)},expression:"formItem.goalAchieve"}},[n("Radio",{attrs:{label:"yes"}},[e._v("Yes")]),e._v(" "),n("Radio",{attrs:{label:"no"}},[e._v("No")])],1)],1):e._e(),e._v(" "),"sys"===e.role?n("FormItem",{attrs:{prop:"goalUnderstand"}},[n("h3",{attrs:{slot:"label"},slot:"label"},[e._v("Do you think you understand user's goal?")]),e._v(" "),n("RadioGroup",{model:{value:e.formItem.goalUnderstand,callback:function(t){e.$set(e.formItem,"goalUnderstand",t)},expression:"formItem.goalUnderstand"}},[n("Radio",{attrs:{label:"yes"}},[e._v("Yes")]),e._v(" "),n("Radio",{attrs:{label:"no"}},[e._v("No")])],1)],1):e._e(),e._v(" "),"cus"===e.role?n("FormItem",{attrs:{prop:"conversationSearch"}},[n("h3",{attrs:{slot:"label"},slot:"label"},[e._v("Would you like to conduct search through conversations in this way?")]),e._v(" "),n("RadioGroup",{model:{value:e.formItem.conversationSearch,callback:function(t){e.$set(e.formItem,"conversationSearch",t)},expression:"formItem.conversationSearch"}},[n("Radio",{attrs:{label:"yes"}},[e._v("Yes")]),e._v(" "),n("Radio",{attrs:{label:"no"}},[e._v("No")])],1)],1):e._e(),e._v(" "),"sys"===e.role?n("FormItem",{attrs:{prop:"easierWay"}},[n("h3",{attrs:{slot:"label"},slot:"label"},[e._v("Which one is easier for user to achieve his/her goal?")]),e._v(" "),n("RadioGroup",{model:{value:e.formItem.easierWay,callback:function(t){e.$set(e.formItem,"easierWay",t)},expression:"formItem.easierWay"}},[n("Radio",{attrs:{label:"search"}},[e._v("Search")]),e._v(" "),n("Radio",{attrs:{label:"conversation"}},[e._v("Conversation")])],1)],1):e._e(),e._v(" "),n("FormItem",{attrs:{prop:"rate"}},[n("h3",{attrs:{slot:"label"},slot:"label"},[e._v("What do you think of your partner's performance?")]),e._v(" "),n("Rate",{attrs:{"allow-half":""},model:{value:e.formItem.rate,callback:function(t){e.$set(e.formItem,"rate",t)},expression:"formItem.rate"}})],1),e._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:e.restart}},[e._v("Submit")])],1)],1)],1)},staticRenderFns:[]},o=n("VU/8")(s,r,!1,null,null,null);t.a=o.exports},"z/pP":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={actionData:{user:[{title:"Reveal",name:"Reveal",tooltip:"Start a new search conversation."},{title:"Revise",name:"Revise",tooltip:"Make a correction."},{title:"Shift",name:"Shift",tooltip:"Start a new search conversation by accepting recommendations."},{title:"Interpret",name:"Interpret",tooltip:"Refine the current question proactively or by answering a clarifying question."},{title:"Feedback",name:"Feedback",tooltip:"Reveal satisfaction to system responses.",children:[{title:"Perfect",name:"Perfect"},{title:"Good",name:"Good"},{title:"Fair",name:"Fair"},{title:"Bad",name:"Bad"}]},{title:"Request",name:"Request",tooltip:"Request system to give expected answer types.",children:[{title:"Summary",name:"Summary"},{title:"Link",name:"Link"},{title:"Factoid",name:"Factoid"},{title:"Recommendation",name:"Recommendation"}]},{title:"Chitchat",name:"Chitchat",tooltip:"Greeting, etc.",allowEmptySearch:!0},{title:"Not-clear",name:"Not-clear",tooltip:"Cannot understand system response."}],system:[{title:"Clarify",name:"Clarify",tooltip:"Choose some suggested queries and ask users a clarifying question.",children:[{title:"Yes",name:"Yes"},{title:"No",name:"No",allowEmptySearch:!0},{title:"Choice",name:"Choice"},{title:"Open",name:"Open"}]},{title:"Recommend",name:"Recommend",tooltip:"Choose some related queries based on which to recommend related topics."},{title:"Answer",name:"Answer",tooltip:"Choose some results and respond to users.",children:[{title:"Summary",name:"Summary"},{title:"Link",name:"Link"},{title:"Factoid",name:"Factoid"}]},{title:"Request",name:"Request",tooltip:"Can understand user response and request users to reformulate questions."},{title:"Chitchat",name:"Chitchat",tooltip:"Greeting, etc.",allowEmptySearch:!0},{title:"Not-clear",name:"Not-clear",tooltip:"Cannot understand system response."}]},history:[{message:"hello，how are you？",time:"2020/02/12 16:00",type:"user"},{message:"fine, thank you and you?",time:"2020/02/12 16:02",type:"sys"},{message:"i am fine too",time:"2020/02/12 16:04",type:"user"}],searchResults:{}};for(var i in a.actionData.system){var s=a.actionData.system[i];["Request","Chitchat","Not-clear"].indexOf(s.name)>=0||(a.searchResults[s.name]=r(s.name))}function r(e){for(var t=[],n=0;n<("Reveal"===e?10:5);n++)t.push({id:e+"-"+n,title:"title-"+e+"-"+n,content:"Reveal"===e?"This is content "+e+" "+n+"--"+new Date:""});return t}t.default=a},zvx4:function(e,t,n){"use strict";var a=n("woOf"),i=n.n(a),s=n("mvHQ"),r=n.n(s),o=n("bOdI"),l=n.n(o),c=n("MICi"),u=n.n(c),d=n("AHH9"),h=n("M4x4"),p=n("xQxY"),f=n("aOkN"),m="ivu-input",v={name:"Input",mixins:[p.a,f.a],props:{type:{validator:function(e){return Object(d.d)(e,["text","textarea","password","url","email","date","number","tel"])},default:"text"},value:{type:[String,Number],default:""},size:{validator:function(e){return Object(d.d)(e,["small","large","default"])},default:function(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},placeholder:{type:String,default:""},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},icon:String,autosize:{type:[Boolean,Object],default:!1},rows:{type:Number,default:2},readonly:{type:Boolean,default:!1},name:{type:String},number:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},autocomplete:{type:String,default:"off"},clearable:{type:Boolean,default:!1},elementId:{type:String},wrap:{validator:function(e){return Object(d.d)(e,["hard","soft"])},default:"soft"},prefix:{type:String,default:""},suffix:{type:String,default:""},search:{type:Boolean,default:!1},enterButton:{type:[Boolean,String],default:!1},showWordLimit:{type:Boolean,default:!1},password:{type:Boolean,default:!1},border:{type:Boolean,default:!0}},data:function(){return{currentValue:this.value,prefixCls:m,slotReady:!1,textareaStyles:{},isOnComposition:!1,showPassword:!1,clearableIconOffset:0}},computed:{currentType:function(){var e=this.type;return"password"===e&&this.password&&this.showPassword&&(e="text"),e},prepend:function(){var e=!1;return"textarea"!==this.type&&(e=void 0!==this.$slots.prepend),e},append:function(){var e=!1;return"textarea"!==this.type&&(e=void 0!==this.$slots.append),e},showPrefix:function(){var e=!1;return"textarea"!==this.type&&(e=""!==this.prefix||void 0!==this.$slots.prefix),e},showSuffix:function(){var e=!1;return"textarea"!==this.type&&(e=""!==this.suffix||void 0!==this.$slots.suffix),e},wrapClasses:function(){var e;return["ivu-input-wrapper",(e={},l()(e,"ivu-input-wrapper-"+this.size,!!this.size),l()(e,"ivu-input-type-"+this.type,this.type),l()(e,"ivu-input-group",this.prepend||this.append||this.search&&this.enterButton),l()(e,"ivu-input-group-"+this.size,(this.prepend||this.append||this.search&&this.enterButton)&&!!this.size),l()(e,"ivu-input-group-with-prepend",this.prepend),l()(e,"ivu-input-group-with-append",this.append||this.search&&this.enterButton),l()(e,"ivu-input-hide-icon",this.append),l()(e,"ivu-input-with-search",this.search&&this.enterButton),l()(e,"ivu-input-wrapper-disabled",this.itemDisabled),e)]},inputClasses:function(){var e;return["ivu-input",(e={},l()(e,"ivu-input-"+this.size,!!this.size),l()(e,"ivu-input-disabled",this.itemDisabled),l()(e,"ivu-input-no-border",!this.border),l()(e,"ivu-input-with-prefix",this.showPrefix),l()(e,"ivu-input-with-suffix",this.showSuffix||this.search&&!1===this.enterButton),e)]},textareaClasses:function(){var e;return["ivu-input",(e={},l()(e,"ivu-input-disabled",this.itemDisabled),l()(e,"ivu-input-no-border",!this.border),e)]},upperLimit:function(){return this.maxlength},textLength:function(){return"number"==typeof this.value?String(this.value).length:(this.value||"").length},clearableStyles:function(){var e={},t=this.clearableIconOffset;return t&&(e.transform="translateX(-"+t+"px)"),e}},methods:{handleEnter:function(e){this.$emit("on-enter",e),this.search&&this.$emit("on-search",this.currentValue)},handleKeydown:function(e){this.$emit("on-keydown",e)},handleKeypress:function(e){this.$emit("on-keypress",e)},handleKeyup:function(e){this.$emit("on-keyup",e)},handleIconClick:function(e){this.$emit("on-click",e)},handleFocus:function(e){this.$emit("on-focus",e)},handleBlur:function(e){this.$emit("on-blur",e),Object(d.b)(this,["DatePicker","TimePicker","Cascader","Search"])||this.dispatch("FormItem","on-form-blur",this.currentValue)},handleComposition:function(e){"compositionstart"===e.type&&(this.isOnComposition=!0),"compositionend"===e.type&&(this.isOnComposition=!1,this.handleInput(e))},handleInput:function(e){if(!this.isOnComposition){var t=e.target.value;this.number&&""!==t&&(t=u()(Number(t))?t:Number(t)),this.$emit("input",t),this.setCurrentValue(t),this.$emit("on-change",e)}},handleChange:function(e){this.$emit("on-input-change",e)},setCurrentValue:function(e){var t=this;e!==this.currentValue&&(this.$nextTick(function(){t.resizeTextarea()}),this.currentValue=e,Object(d.b)(this,["DatePicker","TimePicker","Cascader","Search"])||this.dispatch("FormItem","on-form-change",e))},resizeTextarea:function(){var e=this.autosize;if(!e||"textarea"!==this.type)return!1;var t=e.minRows,n=e.maxRows;this.textareaStyles=Object(h.a)(this.$refs.textarea,t,n)},focus:function(e){var t="textarea"===this.type?this.$refs.textarea:this.$refs.input;t.focus(e);var n=(e||{}).cursor;if(n){var a=t.value.length;switch(n){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(a,a);break;default:t.setSelectionRange(0,a)}}},blur:function(){"textarea"===this.type?this.$refs.textarea.blur():this.$refs.input.blur()},handleClear:function(){this.$emit("input",""),this.setCurrentValue(""),this.$emit("on-change",{target:{value:""}}),this.$emit("on-clear")},handleSearch:function(){if(this.itemDisabled)return!1;this.$refs.input.focus(),this.$emit("on-search",this.currentValue)},handleToggleShowPassword:function(){var e=this;if(this.itemDisabled)return!1;this.showPassword=!this.showPassword,this.focus();var t=this.currentValue.length;setTimeout(function(){e.$refs.input.setSelectionRange(t,t)},0)},handleCalcIconOffset:function(){var e=this.$el.querySelectorAll(".ivu-input-group-append")[0];this.clearableIconOffset=e?e.offsetWidth:0}},watch:{value:function(e){this.setCurrentValue(e)},type:function(){this.$nextTick(this.handleCalcIconOffset)}},mounted:function(){this.slotReady=!0,this.resizeTextarea(),this.handleCalcIconOffset()},updated:function(){this.$nextTick(this.handleCalcIconOffset)}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.wrapClasses},["textarea"!==e.type?[e.prepend?n("div",{directives:[{name:"show",rawName:"v-show",value:e.slotReady,expression:"slotReady"}],class:[e.prefixCls+"-group-prepend"]},[e._t("prepend")],2):e._e(),e._v(" "),e.clearable&&e.currentValue&&!e.itemDisabled?n("i",{staticClass:"ivu-icon",class:["ivu-icon-ios-close-circle",e.prefixCls+"-icon",e.prefixCls+"-icon-clear",e.prefixCls+"-icon-normal"],style:e.clearableStyles,on:{click:e.handleClear}}):e.icon?n("i",{staticClass:"ivu-icon",class:["ivu-icon-"+e.icon,e.prefixCls+"-icon",e.prefixCls+"-icon-normal"],on:{click:e.handleIconClick}}):e.search&&!1===e.enterButton?n("i",{staticClass:"ivu-icon ivu-icon-ios-search",class:[e.prefixCls+"-icon",e.prefixCls+"-icon-normal",e.prefixCls+"-search-icon"],on:{click:e.handleSearch}}):e.showSuffix?n("span",{staticClass:"ivu-input-suffix"},[e._t("suffix",function(){return[e.suffix?n("i",{staticClass:"ivu-icon",class:["ivu-icon-"+e.suffix]}):e._e()]})],2):e.showWordLimit?n("span",{staticClass:"ivu-input-word-count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e.password?n("span",{staticClass:"ivu-input-suffix",on:{click:e.handleToggleShowPassword}},[e.showPassword?n("i",{staticClass:"ivu-icon ivu-icon-ios-eye-outline"}):n("i",{staticClass:"ivu-icon ivu-icon-ios-eye-off-outline"})]):e._e(),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.icon?e._e():n("i",{staticClass:"ivu-icon ivu-icon-ios-loading ivu-load-loop",class:[e.prefixCls+"-icon",e.prefixCls+"-icon-validate"]})]),e._v(" "),n("input",{ref:"input",class:e.inputClasses,attrs:{id:e.elementId,autocomplete:e.autocomplete,spellcheck:e.spellcheck,type:e.currentType,placeholder:e.placeholder,disabled:e.itemDisabled,maxlength:e.maxlength,readonly:e.readonly,name:e.name,number:e.number,autofocus:e.autofocus},domProps:{value:e.currentValue},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnter.apply(null,arguments)},e.handleKeyup],keypress:e.handleKeypress,keydown:e.handleKeydown,focus:e.handleFocus,blur:e.handleBlur,compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:e.handleInput,change:e.handleChange}}),e._v(" "),e.append?n("div",{directives:[{name:"show",rawName:"v-show",value:e.slotReady,expression:"slotReady"}],class:[e.prefixCls+"-group-append"]},[e._t("append")],2):e.search&&e.enterButton?n("div",{class:[e.prefixCls+"-group-append",e.prefixCls+"-search"],on:{click:e.handleSearch}},[!0===e.enterButton?n("i",{staticClass:"ivu-icon ivu-icon-ios-search"}):[e._v(e._s(e.enterButton))]],2):e.showPrefix?n("span",{staticClass:"ivu-input-prefix"},[e._t("prefix",function(){return[e.prefix?n("i",{staticClass:"ivu-icon",class:["ivu-icon-"+e.prefix]}):e._e()]})],2):e._e()]:[n("textarea",{ref:"textarea",class:e.textareaClasses,style:e.textareaStyles,attrs:{id:e.elementId,wrap:e.wrap,autocomplete:e.autocomplete,spellcheck:e.spellcheck,placeholder:e.placeholder,disabled:e.itemDisabled,rows:e.rows,maxlength:e.maxlength,readonly:e.readonly,name:e.name,autofocus:e.autofocus},domProps:{value:e.currentValue},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleEnter.apply(null,arguments)},e.handleKeyup],keypress:e.handleKeypress,keydown:e.handleKeydown,focus:e.handleFocus,blur:e.handleBlur,compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:e.handleInput}}),e._v(" "),e.showWordLimit?n("span",{staticClass:"ivu-input-word-count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()]],2)},staticRenderFns:[]},y=n("VU/8")(v,g,!1,null,null,null).exports,b=n("/5sW"),I=n("xnsQ"),w=b.default.prototype.$isServer,_=w?function(){}:n("G89T"),x={name:"Drop",props:{placement:{type:String,default:"bottom-start"},className:{type:String},transfer:{type:Boolean},eventsEnabled:{type:Boolean,default:!1}},data:function(){return{popper:null,width:"",popperStatus:!1,tIndex:this.handleGetIndex()}},computed:{styles:function(){var e={};return this.width&&(e.minWidth=this.width+"px"),this.transfer&&(e["z-index"]=1060+this.tIndex),e}},methods:{update:function(){var e=this;w||this.$nextTick(function(){e.popper?(e.popper.update(),e.popperStatus=!0):e.popper=new _(e.$parent.$refs.reference,e.$el,{eventsEnabled:e.eventsEnabled,placement:e.placement,modifiers:{computeStyle:{gpuAcceleration:!1},preventOverflow:{boundariesElement:"window"}},onCreate:function(){e.resetTransformOrigin(),e.$nextTick(e.popper.update())},onUpdate:function(){e.resetTransformOrigin()}}),"iSelect"===e.$parent.$options.name&&(e.width=parseInt(Object(d.c)(e.$parent.$el,"width"))),e.tIndex=e.handleGetIndex()})},destroy:function(){var e=this;this.popper&&setTimeout(function(){e.popper&&!e.popperStatus&&(e.popper.popper.style.display="none",e.popper.destroy(),e.popper=null),e.popperStatus=!1},300)},resetTransformOrigin:function(){if(this.popper){var e=this.popper.popper.getAttribute("x-placement"),t=e.split("-")[0],n=e.split("-")[1];"left"===e||"right"===e||(this.popper.popper.style.transformOrigin="bottom"===t||"top"!==t&&"start"===n?"center top":"center bottom")}},handleGetIndex:function(){return Object(I.a)(),I.b}},created:function(){this.$on("on-update-popper",this.update),this.$on("on-destroy-popper",this.destroy)},beforeDestroy:function(){this.$off("on-update-popper",this.update),this.$off("on-destroy-popper",this.destroy),this.popper&&(this.popper.destroy(),this.popper=null)}},C={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"ivu-select-dropdown",class:this.className,style:this.styles},[this._t("default")],2)},staticRenderFns:[]},S=n("VU/8")(x,C,!1,null,null,null).exports,$={name:"Icon",props:{type:{type:String,default:""},size:[Number,String],color:String,custom:{type:String,default:""}},computed:{classes:function(){var e;return["ivu-icon",(e={},l()(e,"ivu-icon-"+this.type,""!==this.type),l()(e,""+this.custom,""!==this.custom),e)]},styles:function(){var e={};return this.size&&(e["font-size"]=this.size+"px"),this.color&&(e.color=this.color),e}},methods:{handleClick:function(e){this.$emit("click",e)}}},k={render:function(){var e=this.$createElement;return(this._self._c||e)("i",{class:this.classes,style:this.styles,on:{click:this.handleClick}})},staticRenderFns:[]},R=n("VU/8")($,k,!1,null,null,null).exports,F=n("Gu7T"),V=n.n(F),O={name:"Casitem",components:{Icon:R},props:{data:Object,prefixCls:String,tmpItem:Object},computed:{classes:function(){var e;return[this.prefixCls+"-menu-item",(e={},l()(e,this.prefixCls+"-menu-item-active",this.tmpItem.value===this.data.value),l()(e,this.prefixCls+"-menu-item-disabled",this.data.disabled),e)]},showArrow:function(){return this.data.children&&this.data.children.length||"loading"in this.data&&!this.data.loading},showLoading:function(){return"loading"in this.data&&this.data.loading},arrowType:function(){var e="ios-arrow-forward";return this.$IVIEW&&(this.$IVIEW.cascader.customItemArrow?e="":this.$IVIEW.cascader.itemArrow&&(e=this.$IVIEW.cascader.itemArrow)),e},customArrowType:function(){var e="";return this.$IVIEW&&this.$IVIEW.cascader.customItemArrow&&(e=this.$IVIEW.cascader.customItemArrow),e},arrowSize:function(){var e="";return this.$IVIEW&&this.$IVIEW.cascader.itemArrowSize&&(e=this.$IVIEW.cascader.itemArrowSize),e}}},L={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{class:e.classes},[e._v("\n    "+e._s(e.data.label)+"\n    "),e.showArrow?n("Icon",{attrs:{type:e.arrowType,custom:e.customArrowType,size:e.arrowSize}}):e._e(),e._v(" "),e.showLoading?n("i",{staticClass:"ivu-icon ivu-icon-ios-loading ivu-load-loop ivu-cascader-menu-item-loading"}):e._e()],1)},staticRenderFns:[]},E=n("VU/8")(O,L,!1,null,null,null).exports,T=1,D={name:"Caspanel",mixins:[p.a],components:{Casitem:E},props:{data:{type:Array,default:function(){return[]}},disabled:Boolean,changeOnSelect:Boolean,trigger:String,prefixCls:String},data:function(){return{tmpItem:{},result:[],sublist:[]}},watch:{data:function(){this.sublist=[]}},methods:{handleClickItem:function(e){"click"!==this.trigger&&e.children&&e.children.length||this.handleTriggerItem(e,!1,!0)},handleHoverItem:function(e){"hover"===this.trigger&&e.children&&e.children.length&&this.handleTriggerItem(e,!1,!0)},handleTriggerItem:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.disabled){var i=Object(d.b)(this,"Cascader");if(void 0!==e.loading&&!e.children.length&&i&&i.loadData)i.loadData(e,function(){a&&(i.isLoadedChildren=!0),e.children.length&&t.handleTriggerItem(e)});else{var s=this.getBaseItem(e);if((this.changeOnSelect||s.label!==this.tmpItem.label||s.value!==this.tmpItem.value||s.label===this.tmpItem.label&&s.value===this.tmpItem.value)&&(this.tmpItem=s,this.emitUpdate([s])),e.children&&e.children.length){if(this.sublist=e.children,this.dispatch("Cascader","on-result-change",{lastValue:!1,changeOnSelect:this.changeOnSelect,fromInit:n}),this.changeOnSelect){var r=Object(d.a)(this,"Caspanel");r&&r.$emit("on-clear",!0)}}else this.sublist=[],this.dispatch("Cascader","on-result-change",{lastValue:!0,changeOnSelect:this.changeOnSelect,fromInit:n});i&&i.$refs.drop.update()}}},updateResult:function(e){this.result=[this.tmpItem].concat(e),this.emitUpdate(this.result)},getBaseItem:function(e){var t=i()({},e);return t.children&&delete t.children,t},emitUpdate:function(e){"Caspanel"===this.$parent.$options.name?this.$parent.updateResult(e):this.$parent.$parent.updateResult(e)},getKey:function(){return T++}},mounted:function(){var e=this;this.$on("on-find-selected",function(t){for(var n=t.value,a=[].concat(V()(n)),i=0;i<a.length;i++)for(var s=0;s<e.data.length;s++)if(a[i]===e.data[s].value)return e.handleTriggerItem(e.data[s],!0),a.splice(0,1),e.$nextTick(function(){e.broadcast("Caspanel","on-find-selected",{value:a})}),!1}),this.$on("on-clear",function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e.sublist=[],e.tmpItem={},t){var n=Object(d.a)(e,"Caspanel");n&&n.$emit("on-clear",!0)}})}},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.data&&e.data.length?n("ul",{class:[e.prefixCls+"-menu"]},e._l(e.data,function(t){return n("Casitem",{key:e.getKey(),attrs:{"prefix-cls":e.prefixCls,data:t,"tmp-item":e.tmpItem},nativeOn:{click:function(n){return n.stopPropagation(),e.handleClickItem(t)},mouseenter:function(n){return n.stopPropagation(),e.handleHoverItem(t)}}})}),1):e._e(),e.sublist&&e.sublist.length?n("Caspanel",{attrs:{"prefix-cls":e.prefixCls,data:e.sublist,disabled:e.disabled,trigger:e.trigger,"change-on-select":e.changeOnSelect}}):e._e()],1)},staticRenderFns:[]},B=n("VU/8")(D,P,!1,null,null,null).exports,A=n("pY2m"),W=n("JloG"),q=n("BKwk"),z={name:"Cascader",mixins:[p.a,q.a,f.a],components:{iInput:y,Drop:S,Icon:R,Caspanel:B},directives:{clickOutside:A.a,TransferDom:W.a},props:{data:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},placeholder:{type:String},size:{validator:function(e){return Object(d.d)(e,["small","large","default"])},default:function(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},trigger:{validator:function(e){return Object(d.d)(e,["click","hover"])},default:"click"},changeOnSelect:{type:Boolean,default:!1},renderFormat:{type:Function,default:function(e){return e.join(" / ")}},loadData:{type:Function},filterable:{type:Boolean,default:!1},notFoundText:{type:String},transfer:{type:Boolean,default:function(){return!(!this.$IVIEW||""===this.$IVIEW.transfer)&&this.$IVIEW.transfer}},name:{type:String},elementId:{type:String},capture:{type:Boolean,default:function(){return!this.$IVIEW||this.$IVIEW.capture}},transferClassName:{type:String},eventsEnabled:{type:Boolean,default:!1}},data:function(){return{prefixCls:"ivu-cascader",selectPrefixCls:"ivu-select",visible:!1,selected:[],tmpSelected:[],updatingValue:!1,currentValue:this.value||[],query:"",validDataStr:"",isLoadedChildren:!1,isValueNull:!1}},computed:{classes:function(){var e;return["ivu-cascader",(e={},l()(e,"ivu-cascader-show-clear",this.showCloseIcon),l()(e,"ivu-cascader-size-"+this.size,!!this.size),l()(e,"ivu-cascader-visible",this.visible),l()(e,"ivu-cascader-disabled",this.itemDisabled),l()(e,"ivu-cascader-not-found",this.filterable&&""!==this.query&&!this.querySelections.length),e)]},showCloseIcon:function(){return this.currentValue&&this.currentValue.length&&this.clearable&&!this.itemDisabled},displayRender:function(){for(var e=[],t=0;t<this.selected.length;t++)e.push(this.selected[t].label);return this.renderFormat(e,this.selected)},displayInputRender:function(){return this.filterable?"":this.displayRender},localePlaceholder:function(){return void 0===this.placeholder?this.t("i.select.placeholder"):this.placeholder},inputPlaceholder:function(){return this.filterable&&this.currentValue.length?null:this.localePlaceholder},localeNotFoundText:function(){return void 0===this.notFoundText?this.t("i.select.noMatch"):this.notFoundText},querySelections:function(){var e=this,t=[];return function e(n,a,i){for(var s=0;s<n.length;s++){var r=n[s];r.__label=a?a+" / "+r.label:r.label,r.__value=i?i+","+r.value:r.value,r.children&&r.children.length?(e(r.children,r.__label,r.__value),delete r.__label,delete r.__value):t.push({label:r.__label,value:r.__value,display:r.__label,item:r,disabled:!!r.disabled})}}(this.data),t=t.filter(function(t){return!!t.label&&t.label.indexOf(e.query)>-1}).map(function(t){return t.display=t.display.replace(new RegExp(e.query,"g"),"<span>"+e.query+"</span>"),t})},arrowType:function(){var e="ios-arrow-down";return this.$IVIEW&&(this.$IVIEW.cascader.customArrow?e="":this.$IVIEW.cascader.arrow&&(e=this.$IVIEW.cascader.arrow)),e},customArrowType:function(){var e="";return this.$IVIEW&&this.$IVIEW.cascader.customArrow&&(e=this.$IVIEW.cascader.customArrow),e},arrowSize:function(){var e="";return this.$IVIEW&&this.$IVIEW.cascader.arrowSize&&(e=this.$IVIEW.cascader.arrowSize),e},dropdownCls:function(){var e;return e={},l()(e,"ivu-cascader-transfer",this.transfer),l()(e,this.transferClassName,this.transferClassName),e}},methods:{clearSelect:function(){if(this.itemDisabled)return!1;var e=r()(this.currentValue);this.currentValue=this.selected=this.tmpSelected=[],this.handleClose(),this.emitValue(this.currentValue,e),this.broadcast("Caspanel","on-clear")},handleClose:function(){this.visible=!1},toggleOpen:function(){if(this.itemDisabled)return!1;this.visible?this.filterable||this.handleClose():this.onFocus()},onFocus:function(){this.visible=!0,this.currentValue.length||this.broadcast("Caspanel","on-clear")},updateResult:function(e){this.tmpSelected=e},updateSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(!this.changeOnSelect||e||t)&&this.broadcast("Caspanel","on-find-selected",{value:this.currentValue})},emitValue:function(e,t){var n=this;r()(e)!==t&&(this.$emit("on-change",this.currentValue,JSON.parse(r()(this.selected))),this.$nextTick(function(){n.dispatch("FormItem","on-form-change",{value:n.currentValue,selected:JSON.parse(r()(n.selected))})}))},handleInput:function(e){this.query=e.target.value},handleSelectItem:function(e){var t=this,n=this.querySelections[e];if(n.item.disabled)return!1;this.query="",this.$refs.input.currentValue="";var a=r()(this.currentValue);this.currentValue=n.value.split(","),setTimeout(function(){t.emitValue(t.currentValue,a),t.handleClose()},0)},handleFocus:function(){this.$refs.input.focus()},getValidData:function(e){return e.map(function(e){return function e(t){var n=i()({},t);return"loading"in n&&delete n.loading,"__value"in n&&delete n.__value,"__label"in n&&delete n.__label,"children"in n&&n.children.length&&(n.children=n.children.map(function(t){return e(t)})),n}(e)})}},created:function(){var e=this;this.validDataStr=r()(this.getValidData(this.data)),this.$on("on-result-change",function(t){var n=t.lastValue,a=t.changeOnSelect,i=t.fromInit;if(n||a){var s=r()(e.currentValue);e.selected=e.tmpSelected;var o=[];e.selected.forEach(function(e){o.push(e.value)}),i||(e.updatingValue=!0,e.currentValue=o,e.emitValue(e.currentValue,s))}n&&!i&&e.handleClose()})},mounted:function(){this.updateSelected(!0)},watch:{visible:function(e){e?(this.currentValue.length&&this.updateSelected(),this.transfer&&this.$refs.drop.update(),this.broadcast("Drop","on-update-popper")):(this.filterable&&(this.query="",this.$refs.input.currentValue=""),this.transfer&&this.$refs.drop.destroy(),this.broadcast("Drop","on-destroy-popper")),this.$emit("on-visible-change",e)},value:function(e){null===e&&(this.isValueNull=!0),this.currentValue=e||[],null!==e&&e.length||(this.selected=[])},currentValue:function(){this.isValueNull?(this.isValueNull=!1,this.$emit("input",null)):this.$emit("input",this.currentValue),this.updatingValue?this.updatingValue=!1:this.updateSelected(!0)},data:{deep:!0,handler:function(){var e=this,t=r()(this.getValidData(this.data));t!==this.validDataStr&&(this.validDataStr=t,this.isLoadedChildren||this.$nextTick(function(){return e.updateSelected(!1,e.changeOnSelect)}),this.isLoadedChildren=!1)}}}},N={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.handleClose,expression:"handleClose"}],class:e.classes},[n("div",{ref:"reference",class:[e.prefixCls+"-rel"],on:{click:e.toggleOpen}},[n("input",{attrs:{type:"hidden",name:e.name},domProps:{value:e.currentValue}}),e._v(" "),e._t("default",function(){return[n("i-input",{ref:"input",attrs:{"element-id":e.elementId,readonly:!e.filterable,disabled:e.itemDisabled,value:e.displayInputRender,size:e.size,placeholder:e.inputPlaceholder},on:{"on-change":e.handleInput}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.filterable&&""===e.query,expression:"filterable && query === ''"}],class:[e.prefixCls+"-label"],on:{click:e.handleFocus}},[e._v(e._s(e.displayRender))]),e._v(" "),n("Icon",{directives:[{name:"show",rawName:"v-show",value:e.showCloseIcon,expression:"showCloseIcon"}],class:[e.prefixCls+"-arrow"],attrs:{type:"ios-close-circle"},nativeOn:{click:function(t){return t.stopPropagation(),e.clearSelect.apply(null,arguments)}}}),e._v(" "),n("Icon",{class:[e.prefixCls+"-arrow"],attrs:{type:e.arrowType,custom:e.customArrowType,size:e.arrowSize}})]})],2),e._v(" "),n("transition",{attrs:{name:"transition-drop"}},[n("Drop",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"},{name:"transfer-dom",rawName:"v-transfer-dom"}],ref:"drop",class:e.dropdownCls,attrs:{eventsEnabled:e.eventsEnabled,"data-transfer":e.transfer,transfer:e.transfer}},[n("div",[n("Caspanel",{directives:[{name:"show",rawName:"v-show",value:!e.filterable||e.filterable&&""===e.query,expression:"!filterable || (filterable && query === '')"}],ref:"caspanel",attrs:{"prefix-cls":e.prefixCls,data:e.data,disabled:e.itemDisabled,"change-on-select":e.changeOnSelect,trigger:e.trigger}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.filterable&&""!==e.query&&e.querySelections.length,expression:"filterable && query !== '' && querySelections.length"}],class:[e.prefixCls+"-dropdown"]},[n("ul",{class:[e.selectPrefixCls+"-dropdown-list"]},e._l(e.querySelections,function(t,a){var i;return n("li",{class:[e.selectPrefixCls+"-item",(i={},i[e.selectPrefixCls+"-item-disabled"]=t.disabled,i)],domProps:{innerHTML:e._s(t.display)},on:{click:function(t){return e.handleSelectItem(a)}}})}),0)]),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.filterable&&""!==e.query&&!e.querySelections.length||!e.data.length,expression:"(filterable && query !== '' && !querySelections.length) || !data.length"}],class:[e.prefixCls+"-not-found-tip"]},[n("li",[e._v(e._s(e.localeNotFoundText))])])],1)])],1)],1)},staticRenderFns:[]},j=n("VU/8")(z,N,!1,null,null,null).exports,U={name:"Render",functional:!0,props:{render:Function,data:Object},render:function(e,t){return t.props.render(e,t.props.data)}},G=n("tFrH"),M={components:{Render:U},props:{data:Object,prefixCls:String,tmpItem:Object},created:function(){this.data.value||(this.data.value=this.data.name),this.data.label||(this.data.label=this.data.title)},computed:{classes:function(){var e;return[this.prefixCls+"-menu-item",(e={},l()(e,this.prefixCls+"-menu-item-active",this.tmpItem.value===this.data.value),l()(e,this.prefixCls+"-menu-item-disabled",this.data.disabled),e)]},showArrow:function(){return this.data.children&&this.data.children.length||"loading"in this.data&&!this.data.loading},showLoading:function(){return"loading"in this.data&&this.data.loading}},methods:{rendItem:function(e,t){var n=this;return e("div",[t.title,t.tooltip&&e(G.a,{props:{content:t.tooltip},on:{showTooltip:function(){n.$parent&&n.$parent.$emit("showTooltip",t)}}})])}}},H={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{class:e.classes,staticStyle:{"padding-top":"10px"}},[e.data.render?n("Render",{attrs:{data:e.data,render:e.data.render}}):n("Render",{attrs:{render:e.rendItem,data:e.data}}),e._v(" "),e.showArrow?n("Icon",{attrs:{type:"ios-arrow-forward"}}):e._e(),e._v(" "),e.showLoading?n("i",{staticClass:"ivu-icon ivu-icon-ios-loading ivu-load-loop ivu-cascader-menu-item-loading"}):e._e()],1)},staticRenderFns:[]},K={name:"Caspanel",mixins:[{components:{Casitem:n("VU/8")(M,H,!1,null,null,null).exports}}],extends:B,created:function(){var e=this;this.$on("showTooltip",function(t){e.dispatch("Cascader","showTooltip",t)})}},Q={mixins:[{components:{Caspanel:n("VU/8")(K,null,!1,null,null,null).exports}}],extends:j},Y=n("VU/8")(Q,null,!1,null,null,null);t.a=Y.exports}},["nhgq"]);
//# sourceMappingURL=test.990f30c6e1af0d41811a.js.map